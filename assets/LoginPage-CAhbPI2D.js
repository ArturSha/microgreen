import{j as e,c as u,u as f,r as S,a as k,b as C,s as N,g as v}from"./index-B3kzFjH5.js";import{u as P,T as L,I as h,B as b}from"./Input-BA8NAYmY.js";class c{static setItem(s,t){try{localStorage.setItem(s,JSON.stringify(t))}catch{}}static getItem(s){try{const t=localStorage.getItem(s);return t?JSON.parse(t):null}catch{return null}}static removeItem(s){try{localStorage.removeItem(s)}catch{}}static clear(){try{localStorage.clear()}catch{}}}const R="_wrapper_1is96_1",B="_checkbox_1is96_9",E="_box_1is96_13",F="_checked_1is96_24",T="_disabled_1is96_30",r={wrapper:R,checkbox:B,box:E,checked:F,disabled:T},J=({checked:a,label:s,disabled:t,className:n,children:l,onChange:i,...o})=>e.jsxs("label",{className:u(r.wrapper,{[r.disabled]:t},n),children:[e.jsx("input",{type:"checkbox",checked:a,onChange:d=>i(d.target.checked),disabled:t,className:r.checkbox,...o}),e.jsx("div",{className:u(r.box,{[r.checked]:a}),children:a&&e.jsx("span",{children:"✔"})}),s&&e.jsx("span",{className:r.label,children:s}),l]}),O="_loginPage_gg53b_1",U="_form_gg53b_7",V="_btnContainer_gg53b_18",m={loginPage:O,form:U,btnContainer:V},x=c.getItem("password"),D=()=>{const[a,{isFetching:s}]=f(),[t,n]=S.useState(!!x),l=k(),i=C(),{register:o,handleSubmit:d,setError:_,resetField:w,formState:{errors:p}}=P({defaultValues:{password:x||""}}),y=()=>{w("password",{defaultValue:""}),t&&c.setItem("password","")},j=async I=>{const{password:g}=I;try{await a(g).unwrap(),l(N()),t?c.setItem("password",g):c.setItem("password",""),i(v(),{replace:!0})}catch{_("password",{type:"manual",message:"Пароль не верный"})}};return e.jsxs("section",{className:m.loginPage,children:[e.jsx(L,{as:"h1",children:"Войти"}),e.jsxs("form",{className:m.form,onSubmit:d(j),children:[e.jsx(h,{type:"text",placeholder:"Логин",autoComplete:"username",...o("username"),hidden:!0}),e.jsx(h,{type:"password",placeholder:"Введите пароль",autoComplete:"current-password",...o("password"),error:p.password&&p.password.message}),e.jsx(J,{checked:t,onChange:n,children:"Сохранить пароль"}),e.jsxs("div",{className:m.btnContainer,children:[e.jsx(b,{disabled:s,isLoading:s,type:"submit",children:"Войти"}),e.jsx(b,{variant:"danger",type:"button",onClick:y,children:"Очистить"})]})]})]})};export{D as default};
