import{u as f,r as S,a as j,b as C,j as e,s as _,g as P}from"./index-LxDKOKlX.js";import{u as v,T as N,I as l,C as L,B as m}from"./Input-BG5W1ori.js";class a{static setItem(s,t){try{localStorage.setItem(s,JSON.stringify(t))}catch{}}static getItem(s){try{const t=localStorage.getItem(s);return t?JSON.parse(t):null}catch{return null}}static removeItem(s){try{localStorage.removeItem(s)}catch{}}static clear(){try{localStorage.clear()}catch{}}}const R="_loginPage_gg53b_1",k="_form_gg53b_7",B="_btnContainer_gg53b_18",r={loginPage:R,form:k,btnContainer:B},d=a.getItem("password"),T=()=>{const[o,{isFetching:s}]=f(),[t,g]=S.useState(!!d),p=j(),u=C(),{register:n,handleSubmit:h,setError:w,resetField:b,formState:{errors:c}}=v({defaultValues:{password:d||""}}),x=()=>{b("password",{defaultValue:""}),t&&a.setItem("password","")},y=async I=>{const{password:i}=I;try{await o(i).unwrap(),p(_()),t?a.setItem("password",i):a.setItem("password",""),u(P(),{replace:!0})}catch{w("password",{type:"manual",message:"Пароль не верный"})}};return e.jsxs("section",{className:r.loginPage,children:[e.jsx(N,{as:"h1",children:"Войти"}),e.jsxs("form",{className:r.form,onSubmit:h(y),children:[e.jsx(l,{type:"text",placeholder:"Логин",autoComplete:"username",...n("username"),hidden:!0}),e.jsx(l,{type:"password",placeholder:"Введите пароль",autoComplete:"current-password",...n("password"),error:c.password&&c.password.message}),e.jsx(L,{checked:t,onChange:g,children:"Сохранить пароль"}),e.jsxs("div",{className:r.btnContainer,children:[e.jsx(m,{disabled:s,isLoading:s,type:"submit",children:"Войти"}),e.jsx(m,{variant:"danger",type:"button",onClick:x,children:"Очистить"})]})]})]})};export{T as default};
